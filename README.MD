# üîê Node Store API
> Uma API que simula uma loja.
Este √© um projeto feito para BlueEdTech para treinar a cria√ß√£o de uma API RESTful em Node.js. V√°rias tecnologias em alta demanda no mercado foram utilizadas, como JWT para valida√ß√£o de identidade, MongoDB e Mongoose para persist√™ncia de dados.

# üöÄ Executando o projeto
Antes de tudo, √© necess√°rio criar um arquivo ```.env``` no diret√≥rio raiz do projeto, seguindo a mesma estrutura do [arquivo .env.example](/.env.example), que tamb√©m se encontra no diret√≥rio raiz.

Ap√≥s criar o arquivo e preencher os dados necess√°rios, √© hora de baixar as depend√™ncias utilizando ```npm --install``` ou ```yarn```.

Com as depend√™ncias instaladas, o projeto j√° est√° pronto para ser executado. H√° duas formas de fazer isso: executar em modo de produ√ß√£o, utilizando ```npm start``` ou ```yarn run start```, ou em modo de desenvolvimento utilizando ```npm run dev``` ou ```yarn run dev```. Executar em modo de desenvolvimento ir√° mostrar algumas informa√ß√µes √∫teis no console, como por exemplo, o status de conex√£o com o banco de dados.

# üìÉ Documenta√ß√£o dos endpoints
A documenta√ß√£o segue a seguinte conven√ß√£o: rotas p√∫blicas que n√£o requerem autentica√ß√£o s√£o prefixadas com (‚úÖ). Rotas protegidas requerem um cabe√ßalho de autentica√ß√£o no estilo ```Bearer <token>```, e s√£o prefixadas com (üîí).

---
### ‚úÖ **POST** ```/customers```

Cria um usu√°rio, que dever√° ser utilizado para adquirir uma autentica√ß√£o.

Par√¢metros obrigat√≥rios no corpo da requisi√ß√£o:
- name: ```string``` | Nome do usu√°rio
- email: ```string``` | E-mail do usu√°rio
- password: ```string``` | Senha do usu√°rio

Exemplo de resposta:
```json
{
  "message": "Cliente cadastrado com sucesso!"
}
```
---
### ‚úÖ **POST** ```/customers/authenticate```

Autentica o usu√°rio, e retorna um ```Bearer token``` que dever√° ser utilizado nos endpoints protegidos.

Par√¢metros obrigat√≥rios no corpo da requisi√ß√£o:
- email: ```string``` | E-mail do usu√°rio
- password: ```string``` | Senha do usu√°rio

Exemplo de resposta:
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxNDNlYWI3YmIxZDRjOTNkMDA0ZWMwNiIsImVtYWlsIjoiZ3VpbGhlcm1lc2NvcnJlYTFAZ21haWwuY29tIiwibmFtZSI6Ikd1aWxoZXJtZSBDb3JyZWEiLCJyb2xlcyI6WyJ1c2VyIl0sImlhdCI6MTYzMTg0MDk4NywiZXhwIjoxNjMxOTI3Mzg3fQ.FhdYyOuCGM34QPZGBDX3IV507e7bS5QOzgr8yM3ufxA",
  "data": {
    "email": "guilhermescorrea1@gmail.com",
    "name": "Guilherme Correa"
  }
}
```
---
### ‚úÖ **GET** ```/products```
Retorna um array contendo os produtos cadastrados.

Exemplo de resposta:
```json
[
  {
    "active": true,
    "tags": [
      "mouse",
      "gamer"
    ],
    "_id": "61411b34ae9d782398c35963",
    "title": "Mouse Gamer",
    "slug": "mouse-gamer",
    "description": "Mouse gamer r√°pido e de qualidade",
    "price": 200,
    "__v": 0
  },
  {
    "active": true,
    "tags": [
      "teclado",
      "gamer",
      "teclado mecanico"
    ],
    "_id": "61427795ef20544f9c89335a",
    "title": "Teclado Gamer",
    "slug": "teclado-gamer",
    "description": "Teclado gamer mec√¢nico.",
    "price": 800,
    "__v": 0
  },
  {
    "active": true,
    "tags": [
      "cadeira",
      "gamer"
    ],
    "_id": "6143eb1fbb1d4c93d004ec09",
    "title": "Cadeira Gamer",
    "slug": "cadeira-gamer",
    "description": "Cadeira gamer confort√°vel",
    "price": 1500,
    "__v": 0
  }
]
```
---
### ‚úÖ **GET** ```/products/adm/<id>```
>```userId``` ID v√°lido de um produto
Retorna o produto contendo o Id informado.

Exemplo de resposta:
```json
{
  "active": true,
  "tags": [
    "cadeira",
    "gamer"
  ],
  "_id": "6143eb1fbb1d4c93d004ec09",
  "title": "Cadeira Gamer",
  "slug": "cadeira-gamer",
  "description": "Cadeira gamer confort√°vel",
  "price": 1500,
  "__v": 0
}
```
---
### üîí **POST** ```/products```

Cria um produto

Par√¢metros obrigat√≥rios no corpo da requisi√ß√£o:
- title: ```string``` | T√≠tulo do produto
- slug: ```string``` | T√≠tulo sem letra mai√∫scula
- price: ```number``` | Pre√ßo do produto
- tags: ```string``` | tags do produto [array]

Um token de admin pode ser passado das seguintes maneiras:
query: ```/products?<token>```
body: "token": <token>
header: x-access-token = <token>

Exemplo de resposta:
```json
{
  "message": "Produto cadastrado com sucesso!"
}
```
---
### üîí **DELETE** ```/products/<userId>```
>```userId``` ID v√°lido de um usu√°rio
Deleta permanentemente um produto da loja.

Um token de admin pode ser passado das seguintes maneiras:
query: ```/products?<token>```
body: "token": <token>
header: x-access-token = <token>

Exemplo de resposta:
```json
{
  "message": "Produto deletado com sucesso!"
}
```
---